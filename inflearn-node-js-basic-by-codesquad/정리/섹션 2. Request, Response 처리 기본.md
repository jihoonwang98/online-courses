# [Node.js 웹개발로 알아보는 백엔드 자바스크립트의 이해] 섹션 2. Request, Response 처리 기본

> [인프런](https://www.inflearn.com/course/node-js-%EC%9B%B9%EA%B0%9C%EB%B0%9C)
>
> [실습 코드 - 깃허브](https://github.com/crongro/node_server_inflearn)



### 목차

- POST 요청 처리
- View engine을 활용한 응답 처리
- JSON을 활용한 Ajax 처리



## \#1 POST 요청 처리

- 이번에는 html `form` 태그를 이용해서 POST 요청을 보내보고 서버에서 처리해보자.

- `form.html`

  ```html
  <!doctype html>
  <html>
    <head>
      <meta charset="utf-8">
      <title>email form</title>
    </head>
    <body>
      <form action="/email_post" method="post">
        email: <input type="text" name="email"><br/>
        submit <input type="submit">
      </form>
    </body>
  </html>
  ```

  - `public` 폴더에 저장

- `app.js`

  ```javascript
  var express = require('express');
  var app = express();
  app.listen(3000, function() {
  	console.log('start! express server on port 3000');
  });
  
  app.use(express.static('public'));
  
  app.get('/', function(req, res) {
    res.sendFile(__dirname + '/public/main.html');
  });
  
  
  <!-- 밑 부분 추가 -->
  app.post('/email_post', function(req, res) {
    res.send('post response')
  });
  ```

  - `localhost:3030/form`으로 접속해서 `제출` 버튼 누르면 

    POST `localhost:3030/email_post` 요청이 날라가고, `post response`라고 응답이 옴.

  - 데이터는 어떻게 받는가?

    - GET 요청은 `req.param('email')` 이런식으로 받을 수 있는데,
    - POST 요청의 경우는 `body-parser`라는 별도의 모듈이 필요하다.

- `body-parser`

  - 설치 

    - `npm install body-parser --save`로 프로젝트에 설치해주자.

  - import

    - `express`처럼 `require`를 이용해 불러오자..

      -  `var bodyParser = require('body-parser');`

    - `express`한테도 '나 `body-parser` 쓸거야'라고 알려준다.

      - ```javascript
        app.use(bodyParser.json());  
        app.use(bodyParser.urlencoded({extended:true}));
        ```

  - 예제

    ```javascript
    var express = require('express');
    var app = express();
    var bodyParser = require('body-parser');
    app.listen(3000, function() {
    	console.log('start! express server on port 3000');
    });
    
    app.use(express.static('public'));
    app.use(bodyParser.json());
    app.use(bodyParser.urlencoded({extended:true}));
    
    app.get('/', function(req, res) {
      // req.param('email')   ->  email이라는 이름의 parameter value
      res.sendFile(__dirname + '/public/main.html');
    });
    
    app.post('/email_post', function(req, res) {
      console.log(req.body); // { email: 'jihoonwang98@naver.com' }     
      console.log(req.body.email); // jihoonwang98@naver.com
      res.send('<h1>welcome!! ' + req.body.email + '</h1>');
    });
    ```



## \#2 View engine을 활용한 응답 처리

## \#3 JSON을 활용한 Ajax 처리





